@using RPedretti.TestGraphQL.Web.Pages.Products.Components

@page "/"

@if(loading)
{
	<div style="height: 100%; width: 100%; display: flex; align-items: center; justify-content: center;">
		<span>Loading&hellip;</span>
	</div>
}
else
{
	<div style="height: 100%; width: 100%; overflow: hidden;">
		<h3 style="margin-bottom: 12px;">Products <b>(@products.Count)</b></h3>
		<button class="btn btn-primary" type="button" @onclick=OpenModal>
			Add product
		</button>
		<div style="margin-top: 12px;height: 300px;overflow: hidden auto;">
			<table class="table sort">
				<thead>
					<tr>
						<th scope="col" class="col-4">Selected</th>
						<th scope="col" class="col-4">Product</th>
						<th scope="col" class="col-4">Product type</th>
					</tr>
				</thead>
				<tbody>
					<Virtualize Items="@products" Context="product">
						<ProductListItem Product="@product" @key="product.ProductId" />
					</Virtualize>
				</tbody>

			</table>
		</div>
	</div>
	<AddProductModal OnDismiss="@HandleClose" OnAdd="@HandleAdd" IsOpen=isOpen />
}
